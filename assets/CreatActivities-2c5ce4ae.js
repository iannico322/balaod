import{u as x,r,j as t,L as g,B as w,a as b}from"./index-20213812.js";import{F as v}from"./Footer-cb80966d.js";import{S as c,T as j}from"./TiptapEdit-f496b023.js";import{S as d}from"./sweetalert2.all-9102cae8.js";import{i as y}from"./browser-image-compression-a3ab6596.js";import{L as N}from"./index-e5fdfdc9.js";import"./BalaodWhiteOutFull@3x-b5c97ecf.js";import"./styles-ed9394c8.js";const F=()=>{const m=x();r.useState(!1);const[e,s]=r.useState(JSON.parse(localStorage.getItem("saveEdit")||"")),[l,p]=r.useState(null),h=async a=>{const o=a.target.files[0];if(o){const i=URL.createObjectURL(o),f=await u(o);p(i),s({...e,photo:f})}},u=async a=>await y(a,{maxSizeMB:1,maxWidthOrHeight:2048,useWebWorker:!0,fileType:"image/webp"});r.useEffect(()=>{localStorage.setItem("saveEdit",JSON.stringify(e))},[e]);function n(a){return!a.title||!a.content||!a.photo.name}return t.jsxs("div",{className:" min-h-0 w-full max-w-full  flex flex-col justify-center",children:[t.jsxs("div",{className:" relative w-full flex  justify-center items-center h-[60vh] bg-black overflow-hidden",children:[t.jsx("div",{className:" cursor-pointer z-20 absolute grid w-full max-w-xs items-center gap-1.5",children:t.jsx("input",{id:"picture",className:" cursor-pointer flex h-10 w-full rounded-md border border-input bg-white px-3 py-2 text-sm text-gray-400 file:border-0 file:bg-transparent file:text-gray-600 file:text-sm file:font-medium",required:!0,placeholder:"Photo",type:"file",onChange:h})}),l&&t.jsx("img",{src:l,className:" relative w-full mt-5 text-xl mb-5 object-cover h-[60vh]",alt:""})]}),t.jsxs("div",{className:" mt-5 px-[10vw] md:px-5",children:[t.jsxs(g,{to:"/balaod/editable/kudlit",className:" w-[90px] font-fmedium flex items-center justify-between px-2 py-2 bg-background text-black font-bold border border-gray-300 hover:bg-[#e4e4e4]",children:[t.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})}),"Kudlit"]}),t.jsxs("div",{className:" flex justify-between border border-x-0 py-5 text-base font-fmedium mt-4 ",children:[t.jsxs("div",{className:" flex items-center gap-4",children:[t.jsx("input",{value:e.date,onChange:a=>{s({...e,date:a.target.value})},className:" text-right border border-border",type:"date"}),t.jsx(c,{checked:e.showDate,onCheckedChange:a=>{s({...e,showDate:a})}})]}),t.jsxs("div",{className:" flex items-center gap-4",children:[t.jsx("input",{value:e.location,onChange:a=>{s({...e,location:a.target.value})},placeholder:" Cagayan de Oro, 9000",type:"text",className:" w-[400px] text-right border border-border"}),t.jsx(N,{className:" h-4 w-4"}),t.jsx(c,{checked:e.showLocation,onCheckedChange:a=>{s({...e,showLocation:a})}})]})]}),t.jsxs("div",{className:" flex flex-col  mt-5 font-fmedium text-lg gap-5 mb-36",children:[t.jsx("div",{children:t.jsx("textarea",{value:e.title,onChange:a=>{s({...e,title:a.target.value})},required:!0,className:" w-full outline-none text-primary text-3xl font-fbold",placeholder:"Title e.g Community Engagement: Local Citizens Participate in Process "})}),t.jsx(j,{data:e.content,setData:s}),t.jsx(w,{className:" font-fbold",onClick:async a=>{if(a.preventDefault(),console.log(n(e)),n(e))d.fire({title:"Empty Field (Photo,title,content)!",text:"Some Fields are Empty please fill it up",icon:"error",showConfirmButton:!1,timer:2e3});else{const o=new FormData;o.append("title",e.title),o.append("content",e.content),o.append("photo",e.photo),o.append("location",e.location),o.append("date",e.date),o.append("showDate",e.showDate),o.append("showLocation",e.showLocation);try{await b.post("posting/activity/addActivity/",o,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"multipart/form-data"}}).then(i=>{d.fire({title:"Added!",text:"The new Activity has been Added",icon:"success",showConfirmButton:!1,timer:2e3}),s({title:"",content:"",highlight:!1,photo:null,location:"",date:null,showDate:!0,showLocation:!0}),localStorage.setItem("saveEdit",JSON.stringify({title:"",content:"",highlight:!1,photo:{},location:"",date:null,showDate:!0,showLocation:!0})),m("/balaod/editable/kudlit")})}catch(i){console.error("Error uploading partner data:",i)}}},children:"Publish Blog"})]})]}),t.jsx(v,{})]})};export{F as default};
