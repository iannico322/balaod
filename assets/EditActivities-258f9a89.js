import{b,u as v,r as i,j as e,L as j,B as y,a as d}from"./index-20213812.js";import{F as N}from"./Footer-cb80966d.js";import{S as m,T as k}from"./TiptapEdit-f496b023.js";import{S as u}from"./sweetalert2.all-9102cae8.js";import{i as C}from"./browser-image-compression-a3ab6596.js";import{L as S}from"./index-e5fdfdc9.js";import"./BalaodWhiteOutFull@3x-b5c97ecf.js";import"./styles-ed9394c8.js";const A=()=>{const r=b(),h=v();i.useState(!1);const[a,o]=i.useState(JSON.parse(localStorage.getItem("saveEdit")||""));async function f(){await d.get(`posting/${r.uid}`).then(t=>{o(t.data.activity)})}const[l,n]=i.useState(null),p=async t=>{const s=t.target.files[0];if(s){const g=URL.createObjectURL(s),w=await x(s);n(g),o({...a,photo:w})}};i.useEffect(()=>{f(),n(a.imageURL)},[]);const x=async t=>await C(t,{maxSizeMB:1,maxWidthOrHeight:2048,useWebWorker:!0,fileType:"image/webp"});i.useEffect(()=>{localStorage.setItem("saveEdit",JSON.stringify(a)),console.log(a)},[a]);function c(t){return!t.title||!t.content}return e.jsxs("div",{className:" min-h-0 w-full max-w-full  flex flex-col justify-center",children:[e.jsxs("div",{className:" relative w-full flex  justify-center items-center h-[60vh] bg-black overflow-hidden",children:[e.jsx("div",{className:" cursor-pointer z-20 absolute grid w-full max-w-xs items-center gap-1.5",children:e.jsx("input",{id:"picture",className:" cursor-pointer flex h-10 w-full rounded-md border border-input bg-white px-3 py-2 text-sm text-gray-400 file:border-0 file:bg-transparent file:text-gray-600 file:text-sm file:font-medium",required:!0,placeholder:"Photo",type:"file",onChange:p})}),l&&e.jsx("img",{src:l,className:" relative w-full mt-5 text-xl mb-5 object-cover h-[60vh]",alt:""})]}),e.jsxs("div",{className:" mt-5 px-[10vw] md:px-5",children:[e.jsxs(j,{to:"/balaod/editable/kudlit",className:" w-[90px] font-fmedium flex items-center justify-between px-2 py-2 bg-background text-black font-bold border border-gray-300 hover:bg-[#e4e4e4]",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})}),"Kudlit"]}),e.jsxs("div",{className:" flex justify-between border border-x-0 py-5 text-base font-fmedium mt-4 ",children:[e.jsxs("div",{className:" flex items-center gap-4",children:[e.jsx("input",{value:a.date,onChange:t=>{o({...a,date:t.target.value})},className:" text-right border border-border",type:"date"}),e.jsx(m,{checked:a.showDate,onCheckedChange:t=>{o({...a,showDate:t})}})]}),e.jsxs("div",{className:" flex items-center gap-4",children:[e.jsx("input",{value:a.location,onChange:t=>{o({...a,location:t.target.value})},placeholder:" Cagayan de Oro, 9000",type:"text",className:" w-[400px] text-right border border-border"}),e.jsx(S,{className:" h-4 w-4"}),e.jsx(m,{checked:a.showLocation,onCheckedChange:t=>{o({...a,showLocation:t})}})]})]}),e.jsxs("div",{className:" flex flex-col  mt-5 font-fmedium text-lg gap-5 mb-36",children:[e.jsx("div",{children:e.jsx("textarea",{value:a.title,onChange:t=>{o({...a,title:t.target.value})},required:!0,className:" w-full outline-none text-primary text-3xl font-fbold",placeholder:"Title e.g Community Engagement: Local Citizens Participate in Process "})}),e.jsx(k,{data:a.content,setData:o}),e.jsx(y,{className:" font-fbold",onClick:async t=>{if(t.preventDefault(),console.log(c(a)),c(a))u.fire({title:"Empty Field (Photo,title,content)!",text:"Some Fields are Empty please fill it up",icon:"error",showConfirmButton:!1,timer:2e3});else try{await d.put(`posting/activity/${r.uid}`,a,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"multipart/form-data"}}).then(s=>{u.fire({title:"Added!",text:"The new Activity has been Added",icon:"success",showConfirmButton:!1,timer:2e3}),o({title:"",content:"",highlight:!1,photo:null,location:"",date:null,showDate:!0,showLocation:!0}),localStorage.setItem("saveEdit",JSON.stringify({title:"",content:"",highlight:!1,photo:{},location:"",date:null,showDate:!0,showLocation:!0})),h("/balaod/editable/kudlit")})}catch(s){console.error("Error uploading partner data:",s)}},children:"Update Blog"})]})]}),e.jsx(N,{})]})};export{A as default};
